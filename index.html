<!DOCTYPE html>
<html lang="ar">
<head> <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±</title>
<style>
body{
  margin:0;
  font-family:"Segoe UI",Tahoma;
  background:linear-gradient(135deg,#4f46e5,#9333ea);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.app{
  background:#ffffff;
  width:92%;
  max-width:420px;
  border-radius:25px;
  padding:22px;
  box-shadow:0 20px 45px rgba(0,0,0,.3);
  text-align:center;
  position:relative;
}

.pageIcon{font-size:42px;margin-bottom:5px;}
h1{color:#4f46e5;margin:5px 0;}
h2,h3{color:#333;}

.card{
  background:#f4f4ff;
  padding:18px;
  border-radius:18px;
  margin-top:15px;
}

input,select{
  width:100%;
  padding:13px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:16px;
  margin:10px 0;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#6366f1,#9333ea);
  color:white;
  font-size:18px;
  margin-top:12px;
  cursor:pointer;
}

.voteBtn{
  background:#fff;
  color:#333;
  border:1px solid #ddd;
  margin-bottom:8px;
}

.role{
  font-size:20px;
  font-weight:bold;
  color:#4f46e5;
}

/* Ø²Ø± ÙƒØªÙ… Ø§Ù„ØµÙˆØª */
#muteBtn{
  position: fixed;
  top: 10px;
  left: 10px;
  background: #ffd54f;
  border: none;
  border-radius: 20px;
  padding: 8px 14px;
  font-size: 16px;
}
</style>
</head>

<body>
<div class="app">

<h1>ğŸ•µï¸ Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±</h1>
<button id="muteBtn" onclick="toggleSound()">ğŸ”Š Ø§Ù„ØµÙˆØª Ø´ØºØ§Ù„</button>

<!-- Ø²Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ø£ÙˆÙ„ÙŠ -->
<div id="soundInit">
  <button onclick="initSound()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© â–¶ï¸</button>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© 1 -->
<div id="page1" style="display:none;">
  <div class="pageIcon">âš™ï¸</div>
  <h2>Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>

  <input type="number" id="numPlayers" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†" value="4" min="2">
  <input type="number" id="numImposters" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±" value="1" min="1">

  <select id="topicSelect">
    <option value="food">ğŸ” Ø£Ø·Ø¹Ù…Ø©</option>
    <option value="places">ğŸ“ Ø£Ù…Ø§ÙƒÙ†</option>
    <option value="tools">ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª</option>
  </select>

  <button onclick="goToPage2()">Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</button>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© 2 -->
<div id="page2" style="display:none;">
  <div class="pageIcon">ğŸ‘¥</div>
  <h2>Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
  <div id="namesForm"></div>
  <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ®</button>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© 3 -->
<div id="game" style="display:none;">
  <div class="pageIcon">ğŸ•µï¸â€â™‚ï¸</div>
  <h2 id="player"></h2>
  <button onclick="showRole()">ğŸ‘ï¸ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯ÙˆØ±</button>
  <div class="card role" id="role"></div>
  <button onclick="nextPlayer()">Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</button>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„ØªØµÙˆÙŠØª -->
<div id="vote" class="hidden">
  <div class="pageIcon">ğŸ—³ï¸</div>
  <h2>Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙˆÙŠØª</h2>
  <h3 id="voterName"></h3>
  <div id="voteButtons"></div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div id="result" class="hidden">
  <h2>ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØµÙˆÙŠØª</h2>
  <div id="results"></div>
  <button onclick="showImposter()">ğŸ‘ï¸â€ğŸ—¨ï¸ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±</button>
  <div id="imposterResult" style="margin-top:15px;font-size:20px;color:#e11d48;"></div>
  <button onclick="restart()" style="margin-top:12px;">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
</div>

<!-- Ø§Ù„Ø£ØµÙˆØ§Øª -->
<audio id="revealSound" src="https://assets.mixkit.co/sfx/preview/mixkit-game-notification-wave-alarm-987.mp3"></audio>
<audio id="voteSound" src="https://assets.mixkit.co/sfx/preview/mixkit-click-button-211.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-success-2015.mp3"></audio>

</div>

<script>
let soundInitDiv = document.getElementById("soundInit");
let page1=document.getElementById("page1");
let page2=document.getElementById("page2");
let game=document.getElementById("game");
let votePage=document.getElementById("vote");
let resultPage=document.getElementById("result");

let namesForm=document.getElementById("namesForm");
let playerElem=document.getElementById("player");
let roleDisplay=document.getElementById("role");
let voteButtons=document.getElementById("voteButtons");
let resultsDiv=document.getElementById("results");
let revealSound=document.getElementById("revealSound");
let voteSound=document.getElementById("voteSound");
let winSound=document.getElementById("winSound");

let muteBtn=document.getElementById("muteBtn");

let soundOn = true;

let players=[],roles=[],imposters=[],current=0,chosenTopic="";
let votes = {};
let currentVoter = 0;
let votesLeft = 0; // Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨

let words = {
  food: [
    "Ù‚Ù‡ÙˆØ©","Ø´Ø§ÙŠ","Ø¨ÙŠØªØ²Ø§","Ù…ÙˆØ²","ØªÙØ§Ø­","Ø¹ØµÙŠØ±","Ø´ÙƒÙˆÙ„Ø§ØªØ©","ÙƒØ¹Ùƒ","Ø¨Ø³ÙƒÙˆÙŠØª","Ø¹Ù†Ø¨",
    "Ø¨Ø±ØªÙ‚Ø§Ù„","Ù„ÙŠÙ…ÙˆÙ†","Ø®ÙˆØ®","ÙƒÙ…Ø«Ø±Ù‰","ÙØ±Ø§ÙˆÙ„Ø©","ÙƒØ±Ø²","Ø£Ù†Ø§Ù†Ø§Ø³","Ù…Ø§Ù†Ø¬Ùˆ","Ø¬ÙˆØ§ÙØ©","Ø¨Ø·ÙŠØ®",
    "Ø´Ù…Ø§Ù…","ÙƒÙŠÙˆÙŠ","ØªÙŠÙ†","Ø±Ù…Ø§Ù†","Ø°Ø±Ø©","Ø¨Ø·Ø§Ø·Ø³","Ø¨Ø·Ø§Ø·Ø§","Ø¬Ø²Ø±","Ø®ÙŠØ§Ø±","Ø·Ù…Ø§Ø·Ù…",
    "Ø®Ø³","ÙÙ„ÙÙ„","Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†","ÙƒÙˆØ³Ø©","Ù‚Ø±Ù†Ø¨ÙŠØ·","Ø¨Ø±ÙˆÙƒÙ„ÙŠ","Ø³Ø¨Ø§Ù†Ø®","Ù…Ù„ÙÙˆÙ","ÙÙˆÙ„","Ø¹Ø¯Ø³",
    "Ø­Ù…Øµ","ÙØ§ØµÙˆÙ„ÙŠØ§","Ù„Ø­Ù…","Ø¯Ø¬Ø§Ø¬","Ø³Ù…Ùƒ","Ø±ÙˆØ¨ÙŠØ§Ù†","Ø­Ù„ÙŠØ¨","Ø²Ø¨Ø§Ø¯ÙŠ","Ø¬Ø¨Ù†","Ø²Ø¨Ø¯Ø©",
    "Ø¨ÙŠØ¶","Ø¹Ø³Ù„","Ù…Ø±Ø¨Ù‰","Ø´ÙˆØ±Ø¨Ø©","Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©","Ø£Ø±Ø²","Ø®Ø¨Ø²","Ø¨ÙŠØªØ²Ø§ ØµØºÙŠØ±Ø©","Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´","Ø¨Ø±Ø¬Ø±",
    "Ù†ÙˆØ¯Ù„Ø²","Ø¨ÙŠØªØ²Ø§ Ø¹Ø§Ø¦Ù„ÙŠØ©","ØªÙˆÙ†Ø©","Ø³Ù„Ù…ÙˆÙ†","Ø³ÙˆØ´ÙŠ","Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³","Ø´ÙˆØ±Ø¨Ø© Ø¯Ø¬Ø§Ø¬","Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©","ÙƒØ¹Ùƒ Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©","ÙƒØ¹Ùƒ ÙØ§Ù†ÙŠÙ„ÙŠØ§",
    "ÙƒÙˆÙƒÙŠØ²","Ø¨Ø±ÙŠÙˆØ´","ÙƒØ±ÙˆØ§Ø³ÙˆÙ†","Ø¨Ø§Ù† ÙƒÙŠÙƒ","ÙˆØ§ÙÙ„","Ù…ÙˆØ³","Ø¬ÙŠÙ„Ø§ØªÙŠ","Ù‚Ù‡ÙˆØ© Ù…Ø«Ù„Ø¬Ø©","Ù„Ø§ØªÙŠÙ‡","ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ",
    "Ù…ÙˆÙƒØ§","ÙØ·Ø§Ø¦Ø±","Ø±ØºÙŠÙ","ÙƒØ§Ø±ÙŠ","Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±ØºØ±ÙŠØªØ§","Ø¨Ø±Ø¬Ø± Ø¯Ø¬Ø§Ø¬","Ø¨Ø±Ø¬Ø± Ù„Ø­Ù…","Ø³Ù„Ø·Ø©","ÙÙ„Ø§ÙÙ„","Ø­Ù…Øµ Ø¨Ø§Ù„Ø·Ø­ÙŠÙ†Ø©",
    "Ø´ÙŠØ´ Ø·Ø§ÙˆÙˆÙ‚","Ù…Ø´ÙˆÙŠØ§Øª","Ø¨ÙŠØªØ²Ø§ Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ","ÙØ·ÙŠØ±Ø© Ø§Ù„ØªÙØ§Ø­","Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø¨ÙŠØ¹ÙŠ","ÙƒÙˆÙƒØªÙŠÙ„ ÙÙˆØ§ÙƒÙ‡","Ù…Ø®Ù„Ù„","Ø´ÙˆØ±Ø¨Ø© ÙƒØ±ÙŠÙ…Ø©","Ø¨ÙŠØªØ²Ø§ Ø®Ø¶Ø§Ø±","Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ"
  ],
  places: [
    "Ø¨Ø­Ø±","Ù…Ø¯Ø±Ø³Ø©","Ù…Ø¯ÙŠÙ†Ø©","Ù…Ø·Ø§Ø±","ØºØ§Ø¨Ø©","Ø­Ø¯ÙŠÙ‚Ø©","Ù…Ø³ØªØ´ÙÙ‰","Ø³ÙˆÙ‚","Ù…Ø·Ø¹Ù…","Ù…ÙƒØªØ¨Ø©",
    "Ù…ØªØ­Ù","Ù…Ø³Ø±Ø­","Ù…Ù„Ø¹Ø¨","Ù†Ø§Ø¯ÙŠ","Ù…Ø­Ø·Ø© Ù‚Ø·Ø§Ø±","ÙƒØ§ÙÙŠÙ‡","Ù…Ø±ÙƒØ² ØªØ¬Ø§Ø±ÙŠ","Ø­Ø¯ÙˆØ¯","Ø´Ø§Ø·Ø¦",
    "Ù…Ø²Ø±Ø¹Ø©","Ø­Ø¯ÙŠÙ‚Ø© Ø­ÙŠÙˆØ§Ù†","Ù…Ù†ØªØ²Ù‡","ÙÙ†Ø¯Ù‚","Ø¬Ø²ÙŠØ±Ø©","ØµØ­Ø±Ø§Ø¡","Ù†Ù‡Ø±","Ø¨Ø­ÙŠØ±Ø©","Ø¬Ø¨Ù„","ÙƒÙ‡Ù",
    "ÙƒÙˆØ¨Ø±ÙŠ","Ù…Ø¯Ø±Ø¬","Ù…ÙˆÙ‚Ù Ø³ÙŠØ§Ø±Ø§Øª","Ù…Ø­Ø·Ø© ÙˆÙ‚ÙˆØ¯","Ù…Ø±ÙƒØ² Ø´Ø±Ø·Ø©","Ù…ÙƒØªØ¨Ø© Ø¹Ø§Ù…Ø©","Ø¬Ø§Ù…Ø¹","ÙƒÙ†ÙŠØ³Ø©","Ù…Ø¹Ø¨Ø¯","Ù‚Ù„Ø¹Ø©",
    "Ø¨Ø±Ø¬","Ù…ÙŠØ¯Ø§Ù†","Ø³Ø§Ø­Ø©","Ù…Ø¨Ù†Ù‰ Ø­ÙƒÙˆÙ…ÙŠ","Ù…Ø·Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ","Ù…Ø·Ø§Ø± Ø¯ÙˆÙ„ÙŠ","Ù…ÙŠÙ†Ø§Ø¡","Ù…Ø±ÙƒØ² ØµØ­ÙŠ","Ø¹ÙŠØ§Ø¯Ø©","Ù…Ù„Ø¹Ø¨ ÙƒØ±Ø©","Ù…Ù„Ø¹Ø¨ ØªÙ†Ø³",
    "ØµØ§Ù„Ø© Ø±ÙŠØ§Ø¶Ø©","Ù…Ø³Ø¨Ø­","Ø­Ø¯ÙŠÙ‚Ø© Ø¹Ø§Ù…Ø©","Ù…Ø±ÙƒØ² Ø´Ø¨Ø§Ø¨","Ù…ÙƒØªØ¨Ø© Ù…Ø¯Ø±Ø³ÙŠØ©","Ù…ÙƒØªØ¨Ø© Ø¬Ø§Ù…Ø¹ÙŠØ©","Ø­Ø¯ÙŠÙ‚Ø© Ø¹Ø§Ù…Ø©","Ù…Ù‚Ù‡Ù‰ Ø´Ø¹Ø¨ÙŠ","Ù…Ø·Ø¹Ù… ÙØ§Ø®Ø±","Ù…Ø·Ø¹Ù… Ø´Ø¹Ø¨ÙŠ",
    "Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª","Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ø±ÙƒØª","Ù…Ø­Ø·Ø© Ù…ØªØ±Ùˆ","Ù…Ø­Ø·Ø© ØªØ±Ø§Ù…","Ù…Ø­Ø·Ø© Ø¨Ø§Øµ","Ù…ÙƒØªØ¨Ø© ØµØºÙŠØ±Ø©","Ù…ÙƒØªØ¨Ø© Ù…ØªØ­Ù","Ø­Ø¯ÙŠÙ‚Ø© Ù†Ø¨Ø§ØªÙŠØ©","Ù…Ù†ØªØ²Ù‡ ÙˆØ·Ù†ÙŠ","Ù…Ø²Ø±Ø¹Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©",
    "Ø­Ø¯ÙŠÙ‚Ø© Ø£Ù„Ø¹Ø§Ø¨","Ù…ÙƒØªØ¨Ø© Ø±Ù‚Ù…ÙŠØ©","Ù…Ø³Ø¬Ø¯ ÙƒØ¨ÙŠØ±","ÙƒÙ†ÙŠØ³Ø© ØµØºÙŠØ±Ø©","Ù…Ø¹Ø¨Ø¯ Ø¨ÙˆØ°ÙŠ","Ù…Ø±ÙƒØ² ØªØ³ÙˆÙ‚ ØµØºÙŠØ±","Ù†Ø§Ø¯ÙŠ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ","Ù…Ø±ÙƒØ² ÙÙ†ÙŠ","ØµØ§Ù„Ø© Ø¹Ø±Ø¶","Ù…Ø±ÙƒØ² Ø«Ù‚Ø§ÙÙŠ",
    "Ù…ÙƒØªØ¨Ø© Ø¹Ø§Ù…Ø© ØµØºÙŠØ±Ø©","Ù…Ù†ØªØ²Ù‡ Ø¨Ø­Ø±ÙŠ","Ù…Ù†ØªØ²Ù‡ Ø¬Ø¨Ù„ÙŠ","Ù…Ø·Ø§Ø± ØµØºÙŠØ±","Ù…Ø·Ø§Ø± Ù…Ø­Ù„ÙŠ","Ù…ÙŠÙ†Ø§Ø¡ Ø¨Ø­Ø±ÙŠ","Ù…ÙŠÙ†Ø§Ø¡ Ù†Ù‡Ø±ÙŠ","Ù‚Ø§Ø¹Ø© Ù…Ø¤ØªÙ…Ø±Ø§Øª","Ø§Ø³ØªØ§Ø¯","Ù…ÙƒØªØ¨Ø© Ø¬Ø§Ù…Ø¹ÙŠØ© ÙƒØ¨ÙŠØ±Ø©",
    "Ù…Ø±ÙƒØ² Ø·Ø¨ÙŠ","Ø¹ÙŠØ§Ø¯Ø© Ø®Ø§ØµØ©","Ù…Ø³ØªØ´ÙÙ‰ Ø¹Ø§Ù…","Ù…Ø³ØªØ´ÙÙ‰ Ø®Ø§Øµ","Ù…Ø±ÙƒØ² ØªØ¹Ù„ÙŠÙ…ÙŠ","Ù…Ø¯Ø±Ø³Ø© Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©","Ù…Ø¯Ø±Ø³Ø© Ø«Ø§Ù†ÙˆÙŠØ©","Ø¬Ø§Ù…Ø¹Ø©","ÙƒÙ„ÙŠØ©","Ù…Ø¹Ù‡Ø¯",
    "Ù…ÙƒØªØ¨Ø© Ø£Ø·ÙØ§Ù„","Ù…ÙƒØªØ¨Ø© Ø´Ø¨Ø§Ø¨","Ù…ÙƒØªØ¨Ø© Ù…ØªØ®ØµØµØ©","ØµØ§Ù„Ø© Ø³ÙŠÙ†Ù…Ø§","Ø¯Ø§Ø± Ø¹Ø±Ø¶","Ù‚ØµØ± Ø«Ù‚Ø§ÙØ©","Ù…Ø±ÙƒØ² Ø´Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","Ù…Ù†ØªØ²Ù‡ Ø·Ø¨ÙŠØ¹ÙŠ","Ø­Ø¯ÙŠÙ‚Ø© Ø¹Ø§Ù…Ø© ÙƒØ¨ÙŠØ±Ø©","Ù…Ø²Ø±Ø¹Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙƒØ¨Ø±Ù‰"
  ],
  tools: [
    "Ù‡Ø§ØªÙ","Ø­Ø§Ø³ÙˆØ¨","Ù…ÙØªØ§Ø­","Ù…Ø·Ø±Ù‚Ø©","Ù…Ù‚Øµ","Ù…Ø³Ø·Ø±Ø©","Ù‚Ù„Ù…","Ø¯ÙØªØ±","Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©","Ù…Ù…Ø­Ø§Ø©",
    "Ù„ÙˆØ­ ÙƒØªØ§Ø¨Ø©","Ù…Ù‚Øµ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ","Ù…ÙÙƒ","Ù…ÙØªØ§Ø­ Ø¨Ø±Ø§ØºÙŠ","Ù…ÙØªØ§Ø­ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ","Ø´Ø§ÙƒÙˆØ´","Ù…Ù†Ø´Ø§Ø±","ÙƒÙ…Ø§Ø´Ø©","Ù…Ù‚Ø¨Ø¶","Ù…ÙØªØ§Ø­ Ø±Ø¨Ø·",
    "Ø´Ø±ÙŠØ· Ù‚ÙŠØ§Ø³","Ù…Ù„Ù‚Ø·","Ù…ÙØªØ§Ø­ ØµÙˆØ§Ù…ÙŠÙ„","Ù…ÙØªØ§Ø­ Ø¹Ø²Ù…","Ù…Ø·Ø±Ù‚Ø© Ù…Ø·Ø§Ø·ÙŠØ©","Ù…ÙÙƒ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­","ÙØ£Ø±Ø©","Ø³Ù…Ø§Ø¹Ø©","ÙƒØ§Ù…ÙŠØ±Ø§",
    "Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†","Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†","Ø´Ø§Ø­Ù†","ÙƒØ§Ø¨Ù„ USB","Ù…Ø­ÙˆÙ„ ÙƒÙ‡Ø±Ø¨Ø§Ø¡","Ù…ØµØ¨Ø§Ø­","ÙƒØ´Ø§Ù","Ù…Ø¨Ø±Ø¯","ÙØ±Ø´Ø§Ø©","Ù…Ù‚Øµ Ø­Ù„Ø§Ù‚Ø©",
    "Ù…Ù‚Ù„Ù…Ø©","Ø³ÙƒØ§ÙƒÙŠÙ†","Ù…ØºÙ†Ø§Ø·ÙŠØ³","Ø£Ø¯ÙˆØ§Øª Ø±Ø³Ù…","ÙØ±Ø´Ø§Ø© Ø±Ø³Ù…","Ø£Ù„ÙˆØ§Ù†","Ø£Ù‚Ù„Ø§Ù… ØªÙ„ÙˆÙŠÙ†","Ù„ÙˆØ­Ø© Ø£Ù„ÙˆØ§Ù†","ÙØ±Ø´Ø§Ø© Ù…ÙƒÙŠØ§Ø¬","Ø£Ø¯Ø§Ø© Ù‚ÙŠØ§Ø³",
    "Ø¢Ù„Ø© ØªØµÙˆÙŠØ±","ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙŠØ¯ÙŠÙˆ","Ù…ÙŠÙƒØ±ÙˆØ³ÙƒÙˆØ¨","ØªÙ„Ø³ÙƒÙˆØ¨","Ù…Ø³Ø¨Ø§Ø±","Ù…Ø·Ø±Ù‚Ø© Ø®Ø´Ø¨ÙŠØ©","Ù…Ø·Ø±Ù‚Ø© Ø­Ø¯ÙŠØ¯ÙŠØ©","Ø´Ø§ÙƒÙˆØ´ ØµØºÙŠØ±","ÙƒÙ…Ø§Ø´Ø© ØµØºÙŠØ±Ø©","Ù…Ù„Ù‚Ø· ØµØºÙŠØ±",
    "Ù…Ø³Ø·Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ù…Ø­Ù…ÙˆÙ„Ø©","Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„","Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ÙŠ","Ù„ÙˆØ­ Ø±Ø³Ù…","Ø£Ø¯Ø§Ø© Ù‚Ø·Ø¹","Ù…ÙÙƒ Ø¨Ø±Ø§ØºÙŠ ØµØºÙŠØ±","Ù…ÙØªØ§Ø­ ØµÙˆØ§Ù…ÙŠÙ„ ØµØºÙŠØ±","ÙƒØ§Ø¨Ù„ Ø´Ø§Ø­Ù†","Ø´Ø§Ø­Ù† Ø³ÙŠØ§Ø±Ø©",
    "Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³","Ø³Ù…Ø§Ø¹Ø© Ø£Ø°Ù†","Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø­Ù…ÙˆÙ„","ÙƒØ§Ù…ÙŠØ±Ø§ Ø±Ù‚Ù…ÙŠØ©","ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠØ©","Ù…ØµØ¨Ø§Ø­ ÙŠØ¯ÙˆÙŠ","ÙƒØ´Ø§Ù ØµØºÙŠØ±","Ù…Ø¨Ø±Ø¯ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ","ÙØ±Ø´Ø§Ø© Ø¯Ù‡Ø§Ù†","Ù…Ù‚Øµ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ ØµØºÙŠØ±",
    "Ù…Ø·Ø±Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©","Ù…Ø·Ø±Ù‚Ø© ØµØºÙŠØ±Ø©","Ù…ÙÙƒ Ø¨Ø±Ø§ØºÙŠ ÙƒØ¨ÙŠØ±","Ù…ÙØªØ§Ø­ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ÙƒØ¨ÙŠØ±","Ù…ÙØªØ§Ø­ Ø±Ø¨Ø· ÙƒØ¨ÙŠØ±","Ø´Ø§ÙƒÙˆØ´ ÙƒØ¨ÙŠØ±","ÙƒÙ…Ø§Ø´Ø© ÙƒØ¨ÙŠØ±Ø©","Ù…Ù„Ù‚Ø· ÙƒØ¨ÙŠØ±","Ù…Ø³Ø·Ø±Ø© ÙƒØ¨ÙŠØ±Ø©","Ù‚Ù„Ù… ÙƒØ¨ÙŠØ±",
    "Ø¯ÙØªØ± ÙƒØ¨ÙŠØ±","Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© ÙƒØ¨ÙŠØ±Ø©","Ù„ÙˆØ­ ÙƒØªØ§Ø¨Ø© ÙƒØ¨ÙŠØ±","Ù…Ù‚Øµ ÙƒØ¨ÙŠØ±","Ù…Ù‚Øµ ØµØºÙŠØ±","Ù…ÙØªØ§Ø­ ØµØºÙŠØ±","Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ ØµØºÙŠØ±Ø©","ÙØ£Ø±Ø© ØµØºÙŠØ±Ø©","Ø³Ù…Ø§Ø¹Ø© ØµØºÙŠØ±Ø©","ÙƒØ§Ù…ÙŠØ±Ø§ ØµØºÙŠØ±Ø©",
    "Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† ØµØºÙŠØ±","Ù…Ø§ÙŠÙƒ ØµØºÙŠØ±","Ø´Ø§Ø­Ù† ØµØºÙŠØ±","ÙƒØ§Ø¨Ù„ ØµØºÙŠØ±","Ù…Ø­ÙˆÙ„ ØµØºÙŠØ±","Ù…ØµØ¨Ø§Ø­ ØµØºÙŠØ±","ÙƒØ´Ø§Ù ØµØºÙŠØ±","Ù…Ø¨Ø±Ø¯ ØµØºÙŠØ±","ÙØ±Ø´Ø§Ø© ØµØºÙŠØ±Ø©","Ù…Ù‚Øµ Ø­Ù„Ø§Ù‚Ø© ØµØºÙŠØ±",
    "Ù…Ù‚Ù„Ù…Ø© ØµØºÙŠØ±Ø©","Ø³ÙƒØ§ÙƒÙŠÙ† ØµØºÙŠØ±Ø©","Ù…ØºÙ†Ø§Ø·ÙŠØ³ ØµØºÙŠØ±","Ø£Ø¯ÙˆØ§Øª Ø±Ø³Ù… ØµØºÙŠØ±Ø©","ÙØ±Ø´Ø§Ø© Ø±Ø³Ù… ØµØºÙŠØ±Ø©","Ø£Ù„ÙˆØ§Ù† ØµØºÙŠØ±Ø©","Ø£Ù‚Ù„Ø§Ù… ØªÙ„ÙˆÙŠÙ† ØµØºÙŠØ±Ø©","Ù„ÙˆØ­Ø© Ø£Ù„ÙˆØ§Ù† ØµØºÙŠØ±Ø©","ÙØ±Ø´Ø§Ø© Ù…ÙƒÙŠØ§Ø¬ ØµØºÙŠØ±Ø©","Ø£Ø¯Ø§Ø© Ù‚ÙŠØ§Ø³ ØµØºÙŠØ±Ø©"
  ]
};

// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ØªÙØ§Ø¹Ù„
function initSound(){
  revealSound.play().then(()=>revealSound.pause());
  voteSound.play().then(()=>voteSound.pause());
  winSound.play().then(()=>winSound.pause());
  soundInitDiv.style.display="none";
  page1.style.display="block";
}

function toggleSound(){
    soundOn = !soundOn;
    revealSound.muted = !soundOn;
    voteSound.muted = !soundOn;
    winSound.muted = !soundOn;
    muteBtn.innerText = soundOn ? "ğŸ”Š Ø§Ù„ØµÙˆØª Ø´ØºØ§Ù„" : "ğŸ”‡ Ø§Ù„ØµÙˆØª Ù…Ù‚ÙÙˆÙ„";
}

// Ø§Ù„ØµÙØ­Ø© 1 -> 2
function goToPage2(){
 let n=+numPlayers.value;
 let i=+numImposters.value;
 chosenTopic=topicSelect.value;

 if(n<2||i>=n){alert("Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯");return;}

 namesForm.innerHTML="";
 for(let x=0;x<n;x++){
   let inp=document.createElement("input");
   inp.placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ "+(x+1);
   namesForm.appendChild(inp);
 }
 page1.style.display="none";
 page2.style.display="block";
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
function startGame(){
 players=[...namesForm.querySelectorAll("input")].map(i=>i.value.trim());
 if(players.includes("")){alert("Ø§ÙƒØªØ¨ ÙƒÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡");return;}

 let word=words[chosenTopic][Math.floor(Math.random()*words[chosenTopic].length)];
 roles=[];
 imposters=[];

 for(let i=0;i<numImposters.value;i++)roles.push("âŒ Ø£Ù†Øª Ø¥Ù…Ø¨ÙˆØ³ØªØ±");
 for(let i=0;i<players.length-numImposters.value;i++)roles.push("âœ… Ø§Ù„ÙƒÙ„Ù…Ø©: "+word);
 roles.sort(()=>Math.random()-0.5);

 roles.forEach((r,i)=>{if(r.includes("Ø¥Ù…Ø¨ÙˆØ³ØªØ±"))imposters.push(players[i]);});

 page2.style.display="none";
 game.style.display="block";
 current=0;
 updatePlayer();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
function updatePlayer(){
 roleDisplay.innerText="";
 playerElem.innerText=players[current];
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯ÙˆØ± Ù…Ø¹ ØµÙˆØª
function showRole(){
 roleDisplay.innerText = roles[current];
 if(soundOn){
   revealSound.currentTime = 0;
   revealSound.play();
 }
}

// Ø§Ù„ØªØ§Ù„ÙŠ -> Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØµÙˆÙŠØª
function nextPlayer(){
 current++;
 if(current>=players.length){
   game.style.display="none";
   startVoting();
 }else updatePlayer();
}

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØµÙˆÙŠØª
function startVoting(){
 votes = {};
 players.forEach(p => votes[p]=0);
 currentVoter=0;
 votesLeft = +numImposters.value; // Ø§Ù„Ø£ØµÙˆØ§Øª Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨ = Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±
 votePage.classList.remove("hidden");
 showVoter();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø°ÙŠ ÙŠØµÙˆØª Ø§Ù„Ø¢Ù†
function showVoter(){
 document.getElementById("voterName").innerText = "Ø¯ÙˆØ± Ø§Ù„ØªØµÙˆÙŠØª: " + players[currentVoter] + " | Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: " + votesLeft;
 voteButtons.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

 for(let i=0;i<players.length;i++){
   let name = players[i]; // Ø§Ø³ØªØ®Ø¯Ù… let Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø§Ø³Ù…
   let btn = document.createElement("button");
   btn.className = "voteBtn";
   btn.innerText = "ğŸ—³ï¸ " + name;
   btn.onclick = function(){ castVote(name); };
   voteButtons.appendChild(btn);
   voteButtons.appendChild(document.createElement("br"));
 }
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª
function castVote(name){
 if(soundOn){ voteSound.currentTime=0; voteSound.play(); }
 votes[name]++;
 votesLeft--; // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
 if(votesLeft <= 0){
     currentVoter++;
     if(currentVoter >= players.length){
         showResults();
     } else {
         votesLeft = +numImposters.value; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£ØµÙˆØ§Øª Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
         showVoter();
     }
 } else {
     showVoter(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
 }
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
function showResults(){
 if(soundOn){ winSound.currentTime=0; winSound.play(); }
 votePage.classList.add("hidden");
 resultPage.classList.remove("hidden");
 let res = "";
 for(let p in votes){
     res += `<p>ğŸ§‘ ${p} : ${votes[p]} ØµÙˆØª</p>`;
 }
 resultsDiv.innerHTML = res;
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
function showImposter(){
    if(imposters.length === 1){
        document.getElementById("imposterResult").innerText =
            "âŒ Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ± Ù‡Ùˆ: " + imposters[0];
    } else {
        document.getElementById("imposterResult").innerText =
            "âŒ Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±ÙˆÙ† Ù‡Ù…: " + imposters.join(", ");
    }
}

// Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨
function restart(){ location.reload(); }

</script>

</body>
</html>
